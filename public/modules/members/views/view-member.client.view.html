<section data-ng-controller="MembersController" 
         data-ng-init="findOne()">
  <div ng-show="isLoading" class="loading">Loading&#8230;</div>
  <section id="member">
    <div class="cover">
      <div class="container">
        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-8">
            <h1>{{ member.firstname }} {{ member.lastname }} <small>{{ member.firstnameen | capitalize }} {{ member.lastnameen | capitalize }}</small></h1>
          </div>
        </div>
      </div>
    </div>
    <div class="info">
      <div class="container">
        <div class="row">
          <div magnific-popup
               class="col-md-4">
            <div class="photo-wrapper">
              <a class="photo-link"
                 data-ng-href="{{ member.img2014320 }}" 
                 title="2014"
                 tooltip-placement="right"
                 tooltip-html-unsafe="{{ member.tooltip }}">
                <img class="photo center-block img-circle img-responsive" data-ng-src="{{ member.img2014320s }}">
              </a>
              <a data-ng-href="{{ member.img2013320 }}" title="2013"></a>
              <a data-ng-href="{{ member.img2012320 }}" title="2012"></a>
              <a data-ng-href="{{ member.img2011320 }}" title="2011"></a>
            </div>
            <dl class="dl-horizontal">
              <dt>暱稱</dt>
              <dd data-ng-repeat="nickname in member.nicknames.split(';')"
                  data-ng-bind="nickname"></dd>
              <dt>生日</dt>
              <dd>{{ member.birthday | date:'yyyy年M月d日' }} ({{ member.year }}) <span class="badge" tooltip="{{ member.zodiacsign }}">{{ member.zodiacsignsymbol }}</span></dd>
              <dt>血型</dt>
              <dd>{{ member.bloodtype | getBloodType }}</dd>
              <dt>出生地</dt>
              <dd>{{ member.birthplace | getJapanPlace }}</dd>
              <dt>身高</dt>
              <dd data-ng-bind="member.height + 'cm'"></dd>
              <dt>興趣</dt>
              <dd data-ng-bind="member.interest"></dd>
              <dt>特技</dt>
              <dd data-ng-bind="member.expert"></dd>
              <dt>魅力點</dt>
              <dd data-ng-bind="member.charmingpoint"></dd>
            </dl>
          </div>
          <div class="col-md-8">
            <h4>
              <span class="label label-default">{{ member.generation | getGeneration }}</span>
              <span class="label label-default">{{ member.team | getTeam }}</span>
              <span class="label label-default"
                    ng-show="member.concurrent">{{ member.concurrent | getTeam }} 兼任</span>
              <span class="label label-default"
                    ng-show="member.job">{{ member.job | getJob }}</span>
            </h4>
            <article>
              <p ng-bind-html="member.description"></p>
              <ul>
                <li ng-show="member.officialblogurl">
                  <a data-ng-href="{{ member.officialblogurl }}"
                     class="icon icon-official"
                     target="_blank"
                     tooltip="AKB48官方部落格"></a>
                </li>
                <li ng-show="member.ameblourl">
                  <a data-ng-href="{{ member.ameblourl }}"
                     class="icon icon-ameblo"
                     target="_blank"
                     tooltip="Ameblo"></a>
                </li>
                <li ng-show="member.twitterurl">
                  <a data-ng-href="{{ member.twitterurl }}"
                     class="icon icon-twitter"
                     target="_blank"
                     tooltip="Twitter"></a>
                </li>
                <li ng-show="member.googleplusurl">
                  <a data-ng-href="{{ member.googleplusurl }}"
                     class="icon icon-google"
                     target="_blank"
                     tooltip="Google+"></a>
                </li>
                <li ng-show="member.nanagogourl">
                  <a data-ng-href="{{ member.nanagogourl }}"
                     class="icon icon-nanagogo"
                     target="_blank"
                     tooltip="755"></a>
                </li>
              </ul>
            </article>
          </div>
        </div>
      </div>
    </div>
    <div class="quote">
      <div class="container">
        <h2>“<span ng-bind-html="member.catchphrase"></span>”</h2>
        <p class="lead text-right"><span class="text-mute">written by</span> {{ member.credit }}</p>
      </div>
    </div>
  </section>
  <section id="keywords" data-ng-show="keywords.length">
    <div class="container">
      <div magnific-popup
           zoom-enabled="true">
        <slick init-onload="true"
               data="keywords"
               dots="true"
               autoplay="true"
               infinite="false"
               autoplay-speed="10000"
               pause-on-dots-hover="true">
          <div data-ng-repeat="keyword in keywords">
            <div class="row">
              <div class="col-md-12">
                <h1 class="text-center" data-ng-bind="keyword.title"></h1>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <article ng-bind-html="keyword.content"></article>
              </div>
              <div class="col-md-6">
                <a data-ng-href="{{ keyword.imgurl }}" 
                   title="{{ keyword.content }}">
                  <img class="img-responsive"
                       data-ng-src="{{ keyword.imgurl | thumbnail:'l' }}">
                </a>
              </div>
            </div>
          </div>
        </slick>
      </div>
    </div>
  </section>
  <section id="relationships" data-ng-show="relationships.length">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div magnific-popup
               zoom-enabled="true">
            <slick init-onload="true"
                   data="details"
                   dots="false"
                   arrows="false"
                   infinite="false"
                   draggable="false"
                   current-index="currentGroup">
              <div data-ng-repeat="detail in details">
                <a class="photo-link"
                   data-ng-href="{{ detail.imgurl }}"
                   title="{{ detail.content }}">
                  <div class="photo" ng-style="{'background-image':'url({{ detail.imgurl | thumbnail:'l' }})'}">
                    <div class="photo-title">
                      <h1 class="text-center"
                          data-ng-bind="detail.keyword"></h1>
                    </div>
                    <div class="photo-description">
                      <article ng-bind-html="detail.content"></article>
                      <blockquote>
                        <p data-ng-bind="detail.introduction"></p>
                        <footer class="text-right" data-ng-bind="detail.introductionsource"></footer>
                      </blockquote>
                    </div>
                  </div>
                </a>
              </div>
            </slick>
          </div>
        </div>
        <div class="col-md-6">
          <svg ng-attr-width="{{ svgWidth }}"
               ng-attr-height="{{ svgHeight }}">
            <line ng-repeat="link in d3Links"
                  class="link"
                  ng-attr-x1="{{ link.source.x }}"
                  ng-attr-y1="{{ link.source.y }}"
                  ng-attr-x2="{{ link.target.x }}"
                  ng-attr-y2="{{ link.target.y }}">
            </line>
            <g ng-repeat="node in d3Nodes"
               class="node">
              <clipPath id="cut-off-bottom">
                <circle ng-attr-cx="{{ node.x }}"
                        ng-attr-cy="{{ node.y }}"
                        r="60" />
              </clipPath>
              <image xlink:href=""
                     ng-xlink-href="{{ node.img2014120 }}"
                     ng-x="{{ node.x - 60 }}"
                     ng-y="{{ node.y - 75 }}"
                     width="120"
                     height="150"
                     clip-path="url(#cut-off-bottom)"
                     ng-mouseover="onTargetMemberHover($event)"
                     ng-click="onTargetMemberClick($event)">
              </image>
              <text ng-x="{{ node.x }}"
                    ng-y="{{ node.y + 75 }}"
                    text-anchor="middle">{{ node.firstname }} {{ node.lastname }}</text>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </section>
  <section id="images" data-ng-show="images.length">
    <div class="container">
      <div magnific-popup
           zoom-enabled="true">
         <div deckgrid
             class="deckgrid gallery"
             source="images">   
          <a data-ng-href="{{ card.imgurl }}"
             title="{{ card.description }}">
            <div class="photo">
              <div class="photo-wrapper fade">
                <img imageload
                     class="animation-fade"
                     data-loadedclass="animation-faded"
                     data-ng-src="{{ card.imgurl | thumbnail:'m' }}">
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>
</section>
